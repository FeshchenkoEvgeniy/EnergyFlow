{"version":3,"file":"favorite.js","sources":["../src/ts/favorite.ts"],"sourcesContent":["import { fetchExercisesById, fetchSubtypeExercisesById } from \"./api\";\nimport { createMarkupForFavoriteSubtypeExercises, createMarkupForFavoriteExercisesModal } from \"./createMarkup\";\n\nconst favoriteExercisesList = document.querySelector('.js-favorite-exercises') as HTMLElement;\nconst notFoundContainer = document.querySelector('.js-favorite-exercises__notfound') as HTMLElement\nconst modal = document.querySelector('.js-modal') as HTMLElement\nconst body = document.querySelector('body') as HTMLElement\nconst backdrop = document.querySelector('.js-backdrop') as HTMLElement\n\nconst initialExercisesId = JSON.parse(localStorage.getItem('favorite') || '[]')\n\nif (initialExercisesId.length > 8) {\n    favoriteExercisesList.style.overflowY = 'scroll'\n} else if(initialExercisesId.length){\n    notFoundContainer.classList.add('favorite-exercises__notfound--hidden')\n} else {\n    notFoundContainer.classList.remove('favorite-exercises__notfound--hidden')\n}\n\n\nfetchExercisesById(initialExercisesId)\n    .then(data => favoriteExercisesList.innerHTML = createMarkupForFavoriteSubtypeExercises(data))\n    .catch(err => console.log(err))\n\nfunction handlerClick(evt: Event) {\n    const target = evt.target as HTMLElement;\n    if (target.classList.contains('js-delete-exercises') || target.classList.contains('favorite-delete-icon')) {\n        deleteExercise(evt)\n    } else if (target.classList.contains('js-subtype-exercises__btn')) {\n        openModal(evt)\n    }\n}\n\nfunction openModal(evt: Event) {\n    const target = evt.target as HTMLElement;\n\n    if (!target.classList.contains('js-subtype-exercises__btn')) return;\n\n    const subtypeExercisesItem = target.closest('.js-subtype-exercises__item') as HTMLElement;\n    const id = subtypeExercisesItem?.dataset.id || '64f389465ae26083f39b19d8';\n\n    fetchSubtypeExercisesById(id)\n        .then(result => {\n            modal.innerHTML = createMarkupForFavoriteExercisesModal(result);\n        })\n        .catch(err => console.error('Error fetching subtype exercises:', err));\n    showModal(true);\n}\n\nfunction showModal(show: boolean) {\n    if (show) {\n        backdrop.classList.remove('backdrop--hidden');\n        body.style.overflowY = 'hidden';\n        modal.style.display = 'block';\n    } else {\n        backdrop.classList.add('backdrop--hidden');\n        modal.style.display = 'none';\n        body.style.overflowY = '';\n    }\n}\n\nfunction closeModal(evt: Event) {\n    const target = evt.target as HTMLElement;\n    if (target.classList.contains('js-backdrop') || target.classList.contains('js-modal-close')) {\n        showModal(false);\n    }\n}\n\nfunction deleteExercise(evt: Event) {\n    const target = evt.target as HTMLElement;\n\n    const exercisesId = JSON.parse(localStorage.getItem('favorite') || '[]')\n\n    const exerciseItem = target.closest('.js-subtype-exercises__item') as HTMLElement;\n    const exerciseId = exerciseItem.dataset.id\n\n    const arr = exercisesId.filter((id:string) => id !== exerciseId)\n\n    localStorage.setItem('favorite', JSON.stringify(arr))\n\n    fetchExercisesById(arr)\n    .then(data => favoriteExercisesList.innerHTML = createMarkupForFavoriteSubtypeExercises(data))\n    .catch(err => console.log(err))\n\n    if (!arr.length) {\n        notFoundContainer.classList.remove('favorite-exercises__notfound--hidden')\n    }\n}\n\nfavoriteExercisesList.addEventListener('click', handlerClick)\nbackdrop.addEventListener('click', closeModal);"],"names":["favoriteExercisesList","notFoundContainer","modal","body","backdrop","initialExercisesId","fetchExercisesById","data","createMarkupForFavoriteSubtypeExercises","err","handlerClick","evt","target","deleteExercise","openModal","subtypeExercisesItem","id","fetchSubtypeExercisesById","result","createMarkupForFavoriteExercisesModal","showModal","show","closeModal","exercisesId","exerciseId","arr"],"mappings":"+GAGA,MAAMA,EAAwB,SAAS,cAAc,wBAAwB,EACvEC,EAAoB,SAAS,cAAc,kCAAkC,EAC7EC,EAAQ,SAAS,cAAc,WAAW,EAC1CC,EAAO,SAAS,cAAc,MAAM,EACpCC,EAAW,SAAS,cAAc,cAAc,EAEhDC,EAAqB,KAAK,MAAM,aAAa,QAAQ,UAAU,GAAK,IAAI,EAE1EA,EAAmB,OAAS,EAC5BL,EAAsB,MAAM,UAAY,SAClCK,EAAmB,OACPJ,EAAA,UAAU,IAAI,sCAAsC,EAEpDA,EAAA,UAAU,OAAO,sCAAsC,EAI7EK,EAAmBD,CAAkB,EAChC,KAAKE,GAAQP,EAAsB,UAAYQ,EAAwCD,CAAI,CAAC,EAC5F,MAAME,GAAO,QAAQ,IAAIA,CAAG,CAAC,EAElC,SAASC,EAAaC,EAAY,CAC9B,MAAMC,EAASD,EAAI,OACfC,EAAO,UAAU,SAAS,qBAAqB,GAAKA,EAAO,UAAU,SAAS,sBAAsB,EACpGC,EAAeF,CAAG,EACXC,EAAO,UAAU,SAAS,2BAA2B,GAC5DE,EAAUH,CAAG,CAErB,CAEA,SAASG,EAAUH,EAAY,CAC3B,MAAMC,EAASD,EAAI,OAEnB,GAAI,CAACC,EAAO,UAAU,SAAS,2BAA2B,EAAG,OAEvD,MAAAG,EAAuBH,EAAO,QAAQ,6BAA6B,EACnEI,GAAKD,GAAA,YAAAA,EAAsB,QAAQ,KAAM,2BAErBE,EAAAD,CAAE,EACvB,KAAeE,GAAA,CACNhB,EAAA,UAAYiB,EAAsCD,CAAM,CAAA,CACjE,EACA,MAAMT,GAAO,QAAQ,MAAM,oCAAqCA,CAAG,CAAC,EACzEW,EAAU,EAAI,CAClB,CAEA,SAASA,EAAUC,EAAe,CAC1BA,GACSjB,EAAA,UAAU,OAAO,kBAAkB,EAC5CD,EAAK,MAAM,UAAY,SACvBD,EAAM,MAAM,QAAU,UAEbE,EAAA,UAAU,IAAI,kBAAkB,EACzCF,EAAM,MAAM,QAAU,OACtBC,EAAK,MAAM,UAAY,GAE/B,CAEA,SAASmB,EAAWX,EAAY,CAC5B,MAAMC,EAASD,EAAI,QACfC,EAAO,UAAU,SAAS,aAAa,GAAKA,EAAO,UAAU,SAAS,gBAAgB,IACtFQ,EAAU,EAAK,CAEvB,CAEA,SAASP,EAAeF,EAAY,CAChC,MAAMC,EAASD,EAAI,OAEbY,EAAc,KAAK,MAAM,aAAa,QAAQ,UAAU,GAAK,IAAI,EAGjEC,EADeZ,EAAO,QAAQ,6BAA6B,EACjC,QAAQ,GAElCa,EAAMF,EAAY,OAAQP,GAAcA,IAAOQ,CAAU,EAE/D,aAAa,QAAQ,WAAY,KAAK,UAAUC,CAAG,CAAC,EAEpDnB,EAAmBmB,CAAG,EACrB,KAAKlB,GAAQP,EAAsB,UAAYQ,EAAwCD,CAAI,CAAC,EAC5F,MAAME,GAAO,QAAQ,IAAIA,CAAG,CAAC,EAEzBgB,EAAI,QACaxB,EAAA,UAAU,OAAO,sCAAsC,CAEjF,CAEAD,EAAsB,iBAAiB,QAASU,CAAY,EAC5DN,EAAS,iBAAiB,QAASkB,CAAU"}